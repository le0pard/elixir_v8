<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>ElixirV8 by le0pard</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>ElixirV8</h1>
        <p>V8 engine for Elixir with pools</p>

        <p class="view"><a href="https://github.com/le0pard/elixir_v8">View the Project on GitHub <small>le0pard/elixir_v8</small></a></p>


        <ul>
          <li><a href="https://github.com/le0pard/elixir_v8/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/le0pard/elixir_v8/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/le0pard/elixir_v8">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a id="elixirv8" class="anchor" href="#elixirv8" aria-hidden="true"><span class="octicon octicon-link"></span></a>ElixirV8</h1>

<p>V8 engine for <a href="http://elixir-lang.org/">Elixir</a> with pools.</p>

<h2>
<a id="examples" class="anchor" href="#examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Examples</h2>

<p>Application start:</p>

<pre><code>ElixirV8.start
</code></pre>

<p>or add it in <code>application</code> section in mix:</p>

<pre><code>def application do
  [mod: {Example, []},
   applications: [ :elixir_v8 ] ]
end
</code></pre>

<h3>
<a id="create-pools" class="anchor" href="#create-pools" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create pools</h3>

<pre><code>ElixirV8.create_pool(:default, 10)
</code></pre>

<p>Where <code>:default</code> is name of poll and <code>10</code> is size of pool.</p>

<p>Also you can configure ElixirV8 directly from configuration file to get pools automatically created at application startup. In <code>config/config.exs</code>, add :</p>

<pre><code>config :elixir_v8, pools: [
  test_pool:   [{:size, 10}],
  test_pool_2: [{:size, 20}]
]
</code></pre>

<h4>
<a id="load-js-libs-to-v8" class="anchor" href="#load-js-libs-to-v8" aria-hidden="true"><span class="octicon octicon-link"></span></a>Load js libs to v8</h4>

<p>You also can load js libs to each v8 engine in pool:</p>

<pre><code>js_undescore_lib = Mix.Project.app_path &lt;&gt; "/priv/underscore-min.js"

ElixirV8.create_pool(:main, 10, [{:file, js_undescore_lib}])
</code></pre>

<p>Using config in mix:</p>

<pre><code>js_undescore_lib = Mix.Project.app_path &lt;&gt; "/priv/underscore-min.js"
js_other_lib = Mix.Project.app_path &lt;&gt; "/priv/some-another-lib.js"

config :elixir_v8,
  pools: [
    main: [
      {:size, 10},
      {:max_overflow, 10},
      {:file, js_undescore_lib},
      {:file, js_other_lib}
    ]
  ]

</code></pre>

<h3>
<a id="delete-pools" class="anchor" href="#delete-pools" aria-hidden="true"><span class="octicon octicon-link"></span></a>Delete pools</h3>

<pre><code>ElixirV8.delete_pool(:default)

ElixirV8.delete_pool(:test)
</code></pre>

<h3>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h3>

<p>Usage of pools (<code>eval</code> js code):</p>

<pre><code>iex(2)&gt; ElixirV8.eval({:global, :main}, "1+2")
{:ok, 3}
iex(3)&gt; ElixirV8.eval({:global, :main}, "1+2+3")
{:ok, 6}
</code></pre>

<p>Method <code>eval_function</code> is execute function body with some arguments:</p>

<pre><code>iex(4)&gt; ElixirV8.eval_function({:global, :main}, "return data + 13", [13])
{:ok, 26}
iex(6)&gt; ElixirV8.eval_function({:global, :main}, "return data * 13", [20])
{:ok, 260}
iex(8)&gt; ElixirV8.eval_function({:global, :main}, "return arguments[0] * arguments[1]", [20, 5])
{:ok, 100}
</code></pre>

<h2>
<a id="contributing" class="anchor" href="#contributing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contributing</h2>

<ol>
<li>Fork it</li>
<li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li>
<li>Commit your changes (<code>git commit -am 'Add some feature'</code>)</li>
<li>Push to the branch (<code>git push origin my-new-feature</code>)</li>
<li>Create new Pull Request</li>
</ol>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/le0pard">le0pard</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>